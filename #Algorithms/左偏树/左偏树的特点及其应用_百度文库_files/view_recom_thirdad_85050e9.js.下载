define("wkview:widget/view_recom_thirdad/view_recom_thirdad.js",function(e,t,a){var n=e("wkcommon:widget/ui/lib/jquery/jquery.js"),i=e("wkcommon:widget/lib/doT/doT.min.js"),d=e("wkcommon:widget/ui/lib/inCharset/inCharset.js"),c=e("wkcommon:widget/ui/js_core/log/log.js"),o=e("wkview:widget/view_recom_thirdad/goldclue-content/goldclue-content.js"),r=e("wkcommon:widget/lib/fis/data/data.js"),l=(e("wkcommon:widget/ui/lib/jquery_xdomainrequest/xdomainrequest.js"),{init:function(e,t){var a=this;e=e.data,a.cbRecomAdSolved="function"==typeof t?t:function(){},a.mofangData=e,a.temp=0,a.fcEid=+e.eid||0,a.rightFc=e&&e.right_fengchao_ad?e.right_fengchao_ad:"",a.readFc=e&&e.read_fengchao_ad?e.read_fengchao_ad:"",a.rightWm=e&&e.recommend_ad_wangmeng?e.recommend_ad_wangmeng:"",a.goldClue=e&&e.right_fengchao_gold_ad?e.right_fengchao_gold_ad:"",a.pptFcAd=e&&e.ppt_fengchao_ad?e.ppt_fengchao_ad:"",a.wenji="",a.getOwnerAd();var i={rightFc:a.rightFc,readFc:a.readFc};if(n.event.trigger("fc:monitorPv",{type:"responsePv",result:i}),a.readFc&&a.readFc.ad_place_data&&"object"==typeof a.readFc.ad_place_data?n.event.trigger("docloadOwnData",a.readFc):!a.goldClue&&a.readFc&&a.fcEid&&a.readFc.ad_place_data&&"object"!=typeof a.readFc.ad_place_data?n.event.trigger("docloadFCData",{readFc:a.readFc,fcEid:a.fcEid,callback:a.handleFcJumpLink}):a.goldClue||n.event.trigger("docloadWmData"),a.pptFcAd&&n.event.trigger("showPptFcAd",{pptFcAd:a.pptFcAd,callback:a.handleFcJumpLink}),a.goldClue){var d=e,o=r.get("WkInfo").DocInfo.docId;n.ajax({url:"/org/interface/getcorpusinfo?doc_id="+o,type:"get",success:function(e){0===+e.status.code&&(a.wenji=e.data,n(".goldclue-wrap").length>0&&a.renderGoldClue(d,e.data),e.data.goldClue=a.goldClue,n.event.trigger("showendPageGoldClueAd",e.data),c.xsend(1,101055))}})}a.logObj={},a.fcEid&&a.logNum(a.fcEid),a.events()},renderGoldClue:function(e,t){var a=(e.right_fengchao_gold_ad.ad_place_data.url,'<div class="goldclue-content">\n<div class="goldclue-head">\n<p class="goldclue-count"><em>{{= it.data.corpus_list.length}}</em>\u7bc7</p>\n<p class="goldclue-title">\u76f8\u5173\u7cbe\u54c1\u6587\u8f91</p>\n<p class="goldclue-notes"><em>{{= it.data.down_count}}</em>\u4eba\u5df2\u4e0b\u8f7d</p>\n</div>\n<ul class="goldclue-main">\n{{~it.data.show_corpus :item:i}}{{? i< 3}}\n		<li><a><span class="ic ic-{{= item[2]}}"></span>{{= item[1]}}</a></li>\n{{?}}{{~}}</ul>\n<div class="goldclue-bottom">\n\u67e5\u770b\u5168\u90e8<em>{{= it.data.corpus_list.length}}</em>\u7bc7\u6587\u6863 ></div>\n</div>');a=i.template(a),n(".goldclue-wrap").html(a({data:t}))},renderLikeRecomFc:function(e){var t=this,a=n(".frist-item"),i=0,o="no",l=n("#add-new").length,s=n(".frist-item").length,g=n(".item-owner").length;2018031501===t.fcEid&&(a=n(".item-owner"),i=1),a.html(e.ad_place_data);var p=e.ad_place_js,u="<script>"+p+"</script>";n("head").append(u),i&&(o=a.height()?"y":"n"),c.xsend(1,101568,{index:2,wrap:l,inner:s,newdom:g,trace:i,hasCont:o});var m=a.find("h1").text()||"",w=a.find("p span").eq(0).text()||"",h=r.get("WkInfo").DocInfo.title||"",f=t.mofangData.query||"",v=t.mofangData.hasOwnProperty("callbk_tag")?t.mofangData.callbk_tag:100;h=h+"|"+m+"|"+f,(new d.InCharset).get(h,"gbk",function(e){c.xsend(1,100939,{callbk_tag:v,adTitle:e,clickUrl:w,refer:document.referrer,eid:t.fcEid})}),t.handleFcJumpLink(a)},renderLikeRecomWm:function(){var e='<div class="item wangmeng_income">\n<div class="doc-title rt-wangmeng-title">\n<b class="ic ic-wangmeng"></b>\n<div id="cpro_u3075403" class="rt-wangmeng-wrap"></div>\n<script type="text/javascript">\n			(window.cproArray = window.cproArray || []).push({\n				id: "u3075403"\n			});\n		</script>\n<script src="https://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>\n</div>\n<div class="tail-info">\n<span style="width: 58%; display: inline-block;">www.baidu.com</span><span class="gd-g-u gd-u-3-8">\u641c\u7d22\u63a8\u8350</span>\n</div>\n</div>';e=i.template(e),n(".frist-item").html(e()),c.xsend(1,100945)},handleFcJumpLink:function(e){var t=e;if(t.length){var a=t.find("a"),i=new RegExp("(^|&)(tn|from)=([^&]*)(&|$)"),d=window.location.search.substr(1).match(i),c="";a.each(function(){var e=n(this).attr("href");e.indexOf("www.baidu.com/baidu.php")>-1&&(null!==d?(c=unescape(d[3]),e=e+"&shh=wenku.baidu.com&sht="+c):e+="&shh=wenku.baidu.com",n(this).attr("href",e))})}},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?unescape(a[2]):null},getOwnerAd:function(){var e=this,t=r.get("WkInfo").DocInfo?r.get("WkInfo").DocInfo.jiaoyu_vip_type:0;if(t)return void e.cbRecomAdSolved();var a=r.get("WkInfo").DocInfo.title;n.ajax({type:"post",url:"https://eduad.baidu.com/bidding/wenku_post_json",data:JSON.stringify({slotid:"28",wkkeyword:[a]}),contentType:"text/plain",dataType:"json",success:function(t){if(t.wkrightcpl&&t.wkrightcpl!=={}){var a=t.wkrightcpl.entrance_page||{},i=['<p class="doc-title" style="text-overflow: ellipsis; overflow: hidden;">','<b class="ic ic-pdf">',"</b>",'<a href="javascript:;" class="rec-items A-relate-doc logSend log-xsend raw-income" data-count="'+a.showCount+'" data-fun="raw-income" title="'+a.showTitle+'" data-unitId="'+t.wkrightcpl.unitid+'" data-sid="'+t.wkrightcpl.sid+'" data-p="'+t.wkrightcpl.p+'" data-stm="'+t.wkrightcpl.stm+'" data-clickurl="'+t.wkrightcpl.clickurl+'" data-city="'+t.wkrightcpl.prov+'" data-type="new" data-keyword="'+t.wkrightcpl.keyword+'">',a.showTitle,'</a></p><div class="gd-g tail-info"><div class="gd-g-u gd-u-11-24 gd-value"><span>',a.showCount,"</span>\u4eba\u4e0b\u8f7d</div>",'<div class="gd-g-u gd-u-1-4">&nbsp;',a.showNum,"\u7bc7</div></div>"].join("");n(".frist-item").html(i),e.visitUrl(t.wkrightcpl.impurl),c.xsend(1,100997),e.cbRecomAdSolved();var d=new Date;d.setTime(d.getTime()+72e5),document.cookie="cpladtime=true; expires="+d.toGMTString()}else e.renderLikeRecomFcOrWm(),e.cbRecomAdSolved()},error:function(){e.renderLikeRecomFcOrWm(),e.cbRecomAdSolved()}})},renderLikeRecomFcOrWm:function(){var e=this;e.rightFc&&e.rightFc.ad_place_data&&(e.renderLikeRecomFc(e.rightFc),n.event.trigger("fc:monitorPv",{type:"realShowPv",position:"right",el:n("#add-new")})),e.rightWm&&e.renderLikeRecomWm(e.rightWm)},logNum:function(e){var t=this;62307102===e&&t.rightFc&&t.rightFc.ad_place_data?t.logObj.id="101026":82307102===e&&t.readFc&&t.readFc.ad_place_data?t.logObj.id="101027":72307102===e&&t.readFc&&t.readFc.ad_place_data&&(t.logObj.id="101028"),t.logObj.id&&(n(".more-btn-banner .banner-download").on("click",function(){c.xsend(1,t.logObj.id,{index:1})}),n(".pay-page-inner .reader-download").on("click",function(){c.xsend(1,t.logObj.id,{index:2})}),n(".pay-page-inner .btn-login-joinvip-rightnow").on("click",function(){c.xsend(1,t.logObj.id,{index:3})}),n(".more-btn-banner .goBtn").on("click",function(){c.xsend(1,t.logObj.id,{index:4})}))},events:function(){var e=this;n(".goldclue-wrap").on("click",function(t){var a=n(t.target);if(!a.hasClass("goldclue-notes")){c.xsend(1,101056);var i=e.goldClue;e.temp||n(".goldclue-wrap").hasClass("second-click")?new o(i,e.wenji,3):(new o(i,e.wenji,1),n(".goldclue-wrap").hasClass("second-click")||n(".goldclue-wrap").addClass("second-click"),e.temp=e.temp+1)}})},visitUrl:function(e){if(e){var t=new Image;return t.src=e,t}}});a.exports=l});