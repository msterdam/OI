define("wkview:widget/view_recom_thirdad/goldclue-content/goldclue-content.js",function(n,o,a){function e(n,o,a){this.options=n.ad_place_data,this.wenji=o,this.location=a,this.init(),3!==a&&this.events()}var t=n("wkview:widget/view_recom_thirdad/dialog/dialog.js"),i=n("wkcommon:widget/ui/lib/jquery/jquery.js"),s=n("wkcommon:widget/lib/doT/doT.min.js"),l=n("wkcommon:widget/lib/tangram/base/base.js"),d=n("wkcommon:widget/lib/fis/data/data.js"),c=n("wkcommon:widget/ui/js_core/log/log.js");e.prototype={init:function(){this.showDialog()},showDialog:function(){var n='{{? it.pn == 1 }}<div class="glodclue-doclist-wrap ads-doc-list">\n<div class="goldclue-close step-goldclue-close" data-fun="goldclue-close"></div>\n<div class="glodclue-doclist-head">\n<h2>\u7cbe\u9009\u6587\u8f91\u4e0b\u8f7d</h2>\n<p>\u5171<span class="counter">{{= it.data.corpus_list.length}}</span>\u7bc7\u6587\u6863&nbsp;&nbsp;&nbsp;{{= it.data.down_count}}\u4eba\u5df2\u4e0b\u8f7d&nbsp;&nbsp;&nbsp;<span class="counter">{{= it.bgcData.brand_name}}</span>\u4e13\u4e1a\u63a8\u8350</p>\n</div>\n<div class="glodclue-doclist-content cont">\n<ul class="list dialog-list">\n{{~it.data.corpus_list :item:i}}<li><span class="number">{{= i+1}}</span><span class="ic ic-{{= item[2]}}"></span>{{= item[1]}}</li>\n{{~}}</ul>\n<a href="###" class="ui-bz-btn-senior goldclue-download" data-fun="goldclue-download">\n<b class="ui-bz-btn-p-40 ui-bz-btc ">\u514d\u8d39\u4e0b\u8f7d</b>\n</a>\n</div>\n<div class="glodclue-doclist-bottom">\n<p><span class="green">{{= it.bgcData.brand_name}}</span>\u4e13\u4e1a\u987e\u95ee\u5c06\u81f4\u7535\u670d\u52a1</p>\n</div>\n</div>\n{{?? it.pn == 2}}<div class="goldclue-form-wrap">\n<div class="goldclue-form-container">\n<div class="goldclue-close" data-fun="goldclue-close"></div>\n<div class="dialog-left-greenbar"></div>\n<div class="goldclue-form">\n<div class="dialog-top">\n<p class="doc-title">\u7cbe\u9009\u6587\u8f91\u4e0b\u8f7d</p>\n</div>\n<div class="dialog-inner">\n<div class="goldform">\n<div class="formgroupGold">\n<label for="name">\u59d3&nbsp;&nbsp;\u540d\uff1a</label><input id="name" type="text" placeholder="\u8bf7\u8f93\u5165\u59d3\u540d" name="name" class="txt_usname fixplaceholder name-error ui-bz-ipt"/>\n<span class="errorinfo">\u8bf7\u8f93\u5165\u59d3\u540d</span>\n</div>\n<div class="formgroupGold">\n<label for="tel">\u7535&nbsp;&nbsp;\u8bdd\uff1a</label><input id="tel" class="ui-bz-ipt ui-bz-ipt-bgw fixplaceholder" type="text" placeholder="\u8bf7\u586b\u5199\u624b\u673a\u53f7\u7801" name="phone" autocomplete="off">\n<span class="errorinfo">\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7</span>\n</div>\n<div class="formgroupGold" style="display: none;">\n<div class="yzm-wrap">\n<label for="yzm">\u9a8c\u8bc1\u7801\uff1a</label><input id="yzm" class="ui-bz-ipt ui-bz-ipt-bgw fixplaceholder" type="text" placeholder="\u8bf7\u586b\u5199\u624b\u673a\u9a8c\u8bc1\u7801" name="phone_vcode" style="width: 139px;">\n<a href="javascript:;" class="ui-bz-btn-normal ui-bz-btn-51offer">\n<b class="ui-bz-btn-p-15 ui-bz-btc" data-fun="get-gcmsg">\u83b7\u53d6\u77ed\u4fe1\u9a8c\u8bc1\u7801</b>\n</a>\n</div>\n<span class="errorinfo" id="telerror">\u8bf7\u586b\u5199\u6b63\u786e\u624b\u673a\u9a8c\u8bc1\u7801</span>\n</div>\n<div class="glodclue-form-bottom">\n<p><span class="green">{{= it.data.brand_name}}</span>\u4e13\u4e1a\u987e\u95ee\u5c06\u81f4\u7535\u670d\u52a1<span class="cursor">\u9690\u79c1\u4fdd\u969c<span class="hover-goldclue step2-hover">\n\u60a8\u586b\u5199\u7684\u8054\u7cfb\u4fe1\u606f\u5c06\u7531{{= it.data.brand_name}}\u83b7\u53d6\u5e76\u53ef\u80fd\u76f4\u63a5\u5411\u60a8\u81f4\u7535\uff0c\u5982\u60a8\u4e0d\u5e0c\u671b\u6253\u6270\uff0c\u8bf7\u52ff\u4f7f\u7528\u8be5\u670d\u52a1</span>\n</span></p>\n</div>\n<a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc"><b class="ui-bz-btn-p-16 ui-bz-btc" data-fun="goldclue-submit-info">\u514d\u8d39\u4e0b\u8f7d</b></a>\n<p class="submit-error"></p>\n</div>\n</div>\n</div>\n</div>\n</div>\n{{?? it.pn == 3}}<div class="goldclue-jigou-wrap">\n<div class="goldclue-jigou-container">\n<div class="goldclue-close step-goldclue-close" data-fun="goldclue-close"></div>\n<div class="dialog-left-greenbar"></div>\n<div class="goldclue-jigou-content">\n<div class="dialog-top">\n<p class="doc-title">\u7cbe\u9009\u6587\u8f91\u4e0b\u8f7d</p>\n</div>\n<img src="{{= it.imgurl}}" alt=""/>\n<p class="jigou-tishi">\u4e0b\u8f7d\u6210\u529f\uff0c\u8d44\u6599\u7531{{= it.data.brand_name}}\u4e13\u4e1a\u63a8\u8350</p>\n</div>\n</div>\n<div class="glodclue-form-bottom">\n<p><span class="green">{{= it.data.brand_name}}</span>\u4e13\u4e1a\u987e\u95ee\u5c06\u81f4\u7535\u670d\u52a1<span class="cursor">\u9690\u79c1\u4fdd\u969c<span class="hover-goldclue step2-hover">\n\u60a8\u586b\u5199\u7684\u8054\u7cfb\u4fe1\u606f\u5c06\u7531{{= it.data.brand_name}}\u83b7\u53d6\u5e76\u53ef\u80fd\u76f4\u63a5\u5411\u60a8\u81f4\u7535\uff0c\u5982\u60a8\u4e0d\u5e0c\u671b\u6253\u6270\uff0c\u8bf7\u52ff\u4f7f\u7528\u8be5\u670d\u52a1</span>\n</span></p>\n</div>\n</div>\n{{?}}';n=s.template(n),this.tpl=n,t.init(n({pn:"1",bgcData:this.options,data:this.wenji}))},events:function(){var n=this;i("body").on("click",".goldclue-form-wrap",function(o){var a=i(o.target),e=a.attr("data-fun");switch(e){case"goldclue-submit-info":var s=n.getInfo();if(n.dataLog(1),!s)return i(".submit-error").html("\u8bf7\u5c06\u4fe1\u606f\u586b\u5199\u5b8c\u6574").show(),void n.dataLog(2);s.user_id=n.options.user_id,s.doc_id=d.get("WkInfo").DocInfo&&d.get("WkInfo").DocInfo.docId||"",i.post("/xpage/interface/addgoldclues",s,function(o){var a=+o.status.code,e={code10000:"\u63d0\u4ea4\u6570\u636e\u65e0\u6548",code10001:"\u8bf7\u68c0\u67e5\u9a8c\u8bc1\u7801,\u518d\u505a\u63d0\u4ea4",code10002:"\u64cd\u4f5c\u5931\u8d25 \u8bf7\u91cd\u8bd5"};if(i(".submit-error").html(""),0===+a){if(i(".submit-error").hide(),!+o.data.type){var s=new Image;s.src=n.options.url+"&shh=wenku.baidu.com",n.dataLog(3)}var l="";o.data.ad_info&&o.data.ad_info.logo_url&&(l=o.data.ad_info.logo_url),t.closeDialog(),t.init(n.tpl({pn:"3",data:n.options,imgurl:l})),setTimeout(function(){o.data&&o.data.corpus_info&&n.downWenji(o.data.corpus_info)},300),n.dataLog(4)}else a="code"+a,i(".submit-error").html(e[a]).show(),n.dataLog(5)});break;case"get-gcmsg":var l=i("input[name=phone]");if(!n.isTel(l.val()))return void l.css("border-color","red").siblings(".errorinfo").css("display","block");a.parent().addClass("ui-bz-btn-disable"),a.attr("data-fun","");var c="\u79d2\u540e\u91cd\u53d1",r=120,u="/xpage/interface/sendphonevcode?phone="+l.val();i.get(u,function(n){var o=+n.status.code,e={code10000:"\u65e0\u6548\u7684\u624b\u673a\u53f7",code10001:"\u64cd\u4f5c\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5",code10002:"\u64cd\u4f5c\u5931\u8d25 \u8bf7\u91cd\u8bd5"};if(o){o="code"+o,alert(e[o]||"\u7cfb\u7edf\u7e41\u5fd9, \u8bf7\u7a0d\u540e\u91cd\u8bd5");var t=setInterval(function(){clearInterval(t),a.parent().removeClass("ui-bz-btn-disable"),a.text("\u83b7\u53d6\u77ed\u4fe1\u9a8c\u8bc1\u7801").attr("data-fun","get-gcmsg")},3e3)}else var i=setInterval(function(){r?(a.text(r+c),r--):(clearInterval(i),a.parent().removeClass("ui-bz-btn-disable"),a.text("\u83b7\u53d6\u77ed\u4fe1\u9a8c\u8bc1\u7801").attr("data-fun","get-gcmsg"))},1e3)});break;case"goldclue-close":t.closeDialog()}}),i("body").on("click",".goldclue-download",function(){t.closeDialog(),t.init(n.tpl({pn:"2",data:n.options})),n.placeholder(),1===n.location?c.xsend(1,101059):2===n.location&&c.xsend(1,101060)}),i("body").on("click",".step-goldclue-close",function(){t.closeDialog()}),i("body").on("keyup change",".goldclue-form-container input[name=phone]",function(o){o.preventDefault();var a=i(this).val();n.isTel(a)&&i(".yzm-wrap").parent().show()}),i("body").on("blur",".goldclue-form-container input[name=phone]",function(){var o=i(this),a=o.val();return n.rmErr("phone"),n.isTel(a)?void 0:void n.showErr("phone")}),i("body").on("blur",".goldclue-form-container input[name=name]",function(){var o=i(this),a=o.val();return n.rmErr("name"),a?void 0:void n.showErr("name")}),i("body").on("mouseover",".cursor",function(){i(".hover-goldclue").show()}),i("body").on("mouseleave",".cursor",function(){i(".hover-goldclue").hide()})},isTel:function(n){return!!n.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/)},placeholder:function(){+l.browser.ie<=9&&i(".fixplaceholder").each(function(n,o){var a=i(o).attr("placeholder");i(o).val(a).click(function(){i(this).val()===a&&i(this).val("")}).blur(function(){var n=i(this).val();i.trim(n)||i(this).val(a)})})},showErr:function(n){i("input[name="+n+"]").parents(".formgroupGold").addClass(n+"err")},rmErr:function(n){i("input[name="+n+"]").parents(".formgroupGold").removeClass(n+"err")},getInfo:function(){for(var n=i(".goldform").find(":input").serializeArray(),o={},a=!0,e=0;e<n.length;e++){if(!n[e].value)return a=!1;o[n[e].name]=n[e].value}return o},downWenji:function(n){var o="https://wenku.baidu.com/zippack/bos",a=(i(document.body),i('<form method="post"></form>')),e=i('<input type="hidden">');a.attr({action:o}),e.attr({name:"zipinfo"}),e.val(n),a.append(e),a.appendTo(document.body),a.submit(),document.body.removeChild(a[0])},dataLog:function(n){var o=this;1===o.location?c.xsend(1,101061,{index:n}):2===o.location&&c.xsend(1,101062,{index:n})}},a.exports=e});